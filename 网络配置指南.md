# Flutter æ¡Œé¢ç‰ˆç½‘ç»œé…ç½®æŒ‡å—

## ğŸŒ æ¦‚è¿°
åœ¨ä¸­å›½å¤§é™†åœ°åŒºä½¿ç”¨Flutteræ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°ç½‘ç»œè®¿é—®é—®é¢˜ã€‚æœ¬æŒ‡å—æä¾›å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚

## âŒ å¸¸è§ç½‘ç»œé—®é¢˜

### 1. ä¸‹è½½å¤±è´¥
```
Failed to download https://storage.googleapis.com/flutter_infra_release/...
HttpException: Connection closed before full header was received
```

### 2. ä¾èµ–è·å–å¤±è´¥
```
pub get failed
SocketException: Failed host lookup: 'pub.dartlang.org'
```

### 3. æ„å»ºå·¥å…·ä¸‹è½½å¤±è´¥
```
Downloading windows-x64-debug/windows-x64-flutter tools...
HandshakeException: Connection terminated during handshake
```

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ä½¿ç”¨Flutterå®˜æ–¹å›½å†…é•œåƒæºï¼ˆæ¨èï¼‰

#### ä¸´æ—¶è®¾ç½®ï¼ˆå½“å‰ä¼šè¯æœ‰æ•ˆï¼‰
```powershell
$env:FLUTTER_STORAGE_BASE_URL = "https://storage.flutter-io.cn"
$env:PUB_HOSTED_URL = "https://pub.flutter-io.cn"
```

#### æ°¸ä¹…è®¾ç½®ï¼ˆç³»ç»Ÿç¯å¢ƒå˜é‡ï¼‰
1. **Windowsç³»ç»Ÿè®¾ç½®**:
   ```
   FLUTTER_STORAGE_BASE_URL = https://storage.flutter-io.cn
   PUB_HOSTED_URL = https://pub.flutter-io.cn
   ```

2. **é€šè¿‡PowerShellè®¾ç½®**:
   ```powershell
   [Environment]::SetEnvironmentVariable("FLUTTER_STORAGE_BASE_URL", "https://storage.flutter-io.cn", "User")
   [Environment]::SetEnvironmentVariable("PUB_HOSTED_URL", "https://pub.flutter-io.cn", "User")
   ```

### æ–¹æ¡ˆ2: é…ç½®ä»£ç†ï¼ˆå¦‚æœæœ‰ä»£ç†æœåŠ¡å™¨ï¼‰

#### HTTP/HTTPSä»£ç†
```powershell
$env:HTTP_PROXY = "http://proxy.example.com:8080"
$env:HTTPS_PROXY = "http://proxy.example.com:8080"
```

#### SOCKS5ä»£ç†
```powershell
$env:HTTP_PROXY = "socks5://127.0.0.1:1080"
$env:HTTPS_PROXY = "socks5://127.0.0.1:1080"
$env:ALL_PROXY = "socks5://127.0.0.1:1080"
```

### æ–¹æ¡ˆ3: è…¾è®¯äº‘é•œåƒæºï¼ˆå¤‡é€‰ï¼‰
```powershell
$env:FLUTTER_STORAGE_BASE_URL = "https://storage.flutter-io.cn"
$env:PUB_HOSTED_URL = "https://mirrors.tencent.com/dart-pub"
```

### æ–¹æ¡ˆ4: é˜¿é‡Œäº‘é•œåƒæºï¼ˆå¤‡é€‰ï¼‰
```powershell
$env:FLUTTER_STORAGE_BASE_URL = "https://storage.flutter-io.cn"
$env:PUB_HOSTED_URL = "https://mirrors.aliyun.com/dart-pub"
```

## ğŸš€ è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆ

### ä½¿ç”¨æˆ‘ä»¬çš„å¯åŠ¨è„šæœ¬
```powershell
.\start_desktop.ps1
```
è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… é…ç½®å›½å†…é•œåƒæº
- âœ… æ£€æŸ¥ç½‘ç»œè¿æ¥
- âœ… å¯é€‰é…ç½®ä»£ç†
- âœ… éªŒè¯Flutterç¯å¢ƒ

### æ‰‹åŠ¨éªŒè¯é…ç½®
```powershell
# æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡
echo $env:FLUTTER_STORAGE_BASE_URL
echo $env:PUB_HOSTED_URL

# æµ‹è¯•ç½‘ç»œè¿æ¥
flutter doctor -v
flutter pub get
```

## ğŸ”§ é«˜çº§é…ç½®

### 1. Gité…ç½®ï¼ˆå¦‚æœä½¿ç”¨Gitä¾èµ–ï¼‰
```bash
git config --global url."https://github.com.cnpmjs.org/".insteadOf "https://github.com/"
```

### 2. Dart/Flutterå·¥å…·é“¾ä»£ç†
åœ¨ `~/.dart_tool_config.json` ä¸­æ·»åŠ ï¼š
```json
{
  "proxy": "http://proxy.example.com:8080"
}
```

### 3. VS Codeé…ç½®
åœ¨ `settings.json` ä¸­æ·»åŠ ï¼š
```json
{
  "http.proxy": "http://proxy.example.com:8080",
  "http.proxyStrictSSL": false
}
```

## ğŸ“‹ ç½‘ç»œè¯Šæ–­å‘½ä»¤

### æ£€æŸ¥DNSè§£æ
```powershell
nslookup storage.googleapis.com
nslookup pub.dartlang.org
nslookup storage.flutter-io.cn
```

### æ£€æŸ¥è¿æ¥æ€§
```powershell
Test-Connection storage.flutter-io.cn
Test-Connection pub.flutter-io.cn
curl -I https://storage.flutter-io.cn
```

### æŸ¥çœ‹Flutterç½‘ç»œé…ç½®
```bash
flutter doctor -v
flutter config
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### å®‰å…¨æ€§
- é•œåƒæºéƒ½æ˜¯å®˜æ–¹è®¤å¯çš„ï¼Œå¯ä»¥å®‰å…¨ä½¿ç”¨
- ä»£ç†é…ç½®è¯·ç¡®ä¿ä»£ç†æœåŠ¡å™¨çš„å®‰å…¨æ€§
- é¿å…åœ¨å…¬å…±ç½‘ç»œç¯å¢ƒä¸‹é…ç½®æ•æ„Ÿä»£ç†ä¿¡æ¯

### æ€§èƒ½
- å›½å†…é•œåƒæºé€šå¸¸æ¯”ç›´è¿GoogleæœåŠ¡å™¨æ›´å¿«
- é¦–æ¬¡ä¸‹è½½å¯èƒ½è¾ƒæ…¢ï¼Œåç»­ä¼šæœ‰ç¼“å­˜
- ä»£ç†å¯èƒ½ä¼šå½±å“ä¸‹è½½é€Ÿåº¦

### å…¼å®¹æ€§
- æ‰€æœ‰é…ç½®éƒ½ä¸Flutterå®˜æ–¹å…¼å®¹
- ä¸ä¼šå½±å“åº”ç”¨çš„æ„å»ºå’Œè¿è¡Œ
- å¯ä»¥éšæ—¶åˆ‡æ¢å›å®˜æ–¹æº

## ğŸ†˜ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šé•œåƒæºè®¿é—®å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. å°è¯•å…¶ä»–é•œåƒæº
3. é…ç½®ä»£ç†

### é—®é¢˜2ï¼šä»£ç†é…ç½®æ— æ•ˆ
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. éªŒè¯ä»£ç†æœåŠ¡å™¨çŠ¶æ€
2. æ£€æŸ¥ä»£ç†åœ°å€å’Œç«¯å£
3. å°è¯•ä¸åŒçš„ä»£ç†åè®®

### é—®é¢˜3ï¼šä¾ç„¶ä¸‹è½½ç¼“æ…¢
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨flutter cleanæ¸…ç†ç¼“å­˜
2. åˆ é™¤ `~/.pub-cache` é‡æ–°ä¸‹è½½
3. æ£€æŸ¥é˜²ç«å¢™å’Œæ€æ¯’è½¯ä»¶è®¾ç½®

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»ç„¶é‡åˆ°ç½‘ç»œé—®é¢˜ï¼š

1. **æ£€æŸ¥Flutterç‰ˆæœ¬**ï¼š`flutter --version`
2. **è¿è¡Œè¯Šæ–­å‘½ä»¤**ï¼š`flutter doctor -v`
3. **æ¸…ç†å¹¶é‡è¯•**ï¼š`flutter clean && flutter pub get`
4. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**ï¼š`flutter run -v`

---

**é…ç½®ç½‘ç»œåï¼Œæ¡Œé¢ç‰ˆå°†è¿è¡Œå¾—æ›´åŠ é¡ºç•…ï¼** ğŸš€ 